<mxfile host="app.diagrams.net" modified="2025-12-01T12:00:00.000Z" agent="5.0" version="21.6.8" editor="diagrams">
  <diagram id="ragAgentDiagram" name="Agente RAG CertidÃ£o">
    <mxGraphModel dx="1480" dy="827" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400" background="#FFFFFF">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- SECTION: INGESTÃƒO -->
        <mxCell id="ingest" value="ðŸ“¥ INGEST.PY
Transforma documentos em chunks
â†’ Gera Embeddings
â†’ Salva no Vector Store (Chroma)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#004D99;fillColor=#E6F2FF;fontSize=16;" vertex="1">
          <mxGeometry x="80" y="80" width="340" height="130" as="geometry"/>
        </mxCell>

        <!-- SECTION: VECTOR STORE -->
        <mxCell id="vectorStore" value="ðŸ—‚ï¸ Vector Store: ChromaDB
Persist Directory: /db
Usa OpenAIEmbeddings"
         style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#005500;fillColor=#E8FBE8;fontSize=16;" vertex="1">
          <mxGeometry x="80" y="250" width="340" height="120" as="geometry"/>
        </mxCell>

        <!-- ARROW: INGEST â†’ VECTOR STORE -->
        <mxCell id="arrowIngestToVS" edge="1" parent="1" source="ingest" target="vectorStore"
          style="endArrow=block;strokeColor=#003366;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- SECTION: RETRIEVER -->
        <mxCell id="retriever" value="ðŸ” Retriever
k = 4
Busca contexto relevante
Baseado em embeddings" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#8A2BE2;fillColor=#F5E6FF;fontSize=16;" vertex="1">
          <mxGeometry x="80" y="410" width="340" height="110" as="geometry"/>
        </mxCell>

        <!-- ARROW: VECTOR STORE â†’ RETRIEVER -->
        <mxCell id="arrowVSToRetriever" edge="1" parent="1" source="vectorStore" target="retriever"
          style="endArrow=block;strokeColor=#228B22;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- SECTION: SYSTEM PROMPT -->
        <mxCell id="systemPrompt" value="ðŸ“œ SYSTEM PROMPT
Carregado de system_prompt.md
Customizado com paths do projeto
ResponsÃ¡vel pelo comportamento do agente" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#CC6600;fillColor=#FFF2E6;fontSize=16;" vertex="1">
          <mxGeometry x="500" y="80" width="380" height="120" as="geometry"/>
        </mxCell>

        <!-- SECTION: LLM -->
        <mxCell id="llm" value="ðŸ§  LLM (OpenAI)
LegacyChatOpenAI
Model: gpt-4o-mini (ou outro via ENV)
Callbacks de terminal" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#990000;fillColor=#FFE6E6;fontSize=16;" vertex="1">
          <mxGeometry x="500" y="250" width="380" height="120" as="geometry"/>
        </mxCell>

        <!-- SECTION: TOOLS -->
        <mxCell id="tools" value="ðŸ› ï¸ TOOLS DISPONÃVEIS
- consultar_documentacao (usa RAG)
- buscar_arquivos
- ler_arquivo
- escrever_arquivo
+ Tools adicionais sugeridas:
  â€¢ montar_planejamento
  â€¢ replanejar
  â€¢ gerar_checklist
  â€¢ identificar_riscos
  â€¢ propor_proximo_passo"
         style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#3333CC;fillColor=#ECECFF;fontSize=16;" vertex="1">
          <mxGeometry x="500" y="410" width="380" height="200" as="geometry"/>
        </mxCell>

        <!-- SECTION: GRAPH AGENT -->
        <mxCell id="graphAgent" value="ðŸ¤– GRAPH AGENT (LangGraph)
StateGraph:
- Entrada: pergunta
- NÃ³: executar_agente
- SaÃ­da: resposta
Usa ReAct + system prompt
Executa tools automaticamente"
         style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#006666;fillColor=#E6FFFF;fontSize=16;" vertex="1">
          <mxGeometry x="950" y="250" width="400" height="160" as="geometry"/>
        </mxCell>

        <!-- SECTION: CLI -->
        <mxCell id="cli" value="ðŸ–¥ï¸ CLI
agent.py
Loop:
1. UsuÃ¡rio faz pergunta
2. AgentState(input)
3. LangGraph executa ReAct
4. Usa tools se necessÃ¡rio
5. Responde
6. HistÃ³rico salvo"
         style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#444444;fillColor=#F0F0F0;fontSize=16;" vertex="1">
          <mxGeometry x="950" y="450" width="400" height="180" as="geometry"/>
        </mxCell>

        <!-- ARROWS: Connections -->
        <mxCell id="arrowPromptToLLM" edge="1" parent="1" source="systemPrompt" target="llm"
          style="endArrow=block;strokeColor=#CC6600;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrowLLMToGraph" edge="1" parent="1" source="llm" target="graphAgent"
          style="endArrow=block;strokeColor=#990000;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrowToolsToGraph" edge="1" parent="1" source="tools" target="graphAgent"
          style="endArrow=block;strokeColor=#3333CC;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="arrowGraphToCLI" edge="1" parent="1" source="graphAgent" target="cli"
          style="endArrow=block;strokeColor=#006666;strokeWidth=2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
